<!-- {{properties|json}} -->

<div
  class="property-card-container"
  *ngIf="
    user?.authorities[0].authority !== 'Admin' &&
    user?.authorities[0].authority !== 'SuperAdmin'
  "
>
  <ng-container *ngFor="let p of properties">
    <mat-card class="property-card" *ngIf="p.active ===true">
      <img
        mat-card-image
        src="{{ p.pPhoto }}"
        alt="https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8aG91c2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60"
      />
      <!-- <ng-container *ngIf="p.soldOut; else addToCart">
        <span class="soldOut">
          <img src="../../../../assets/icons/sold-out-326x326.png" alt="" />
        </span>
      </ng-container>

      <ng-template #addToCart>
        <span class="icon">
          <button
            mat-icon-button
            (click)="addToSaved(p.p_id)"
            class="favorite-icon"
            aria-label="Example icon-button with heart icon"
          >
            <mat-icon color="{{ isPropertySaved(p.p_id) ? 'warn' : 'white' }}">
              {{ isPropertySaved(p.p_id) ? "favorite" : "favorite_border" }}
            </mat-icon>
          </button>
        </span>
      </ng-template> -->

      <mat-card-content class="card-content">
        <h3>{{ p.p_name }}</h3>
        <p class="card-content-area">{{ p.a_area }}</p>
        <p class="card-content-price">{{ p.p_price | currency : "INR" }}</p>

        <div class="card-content-keypoints">
          <p>{{ p.p_area }} sqft</p>
          <p>{{ p.a_city }}</p>
        </div>
        <mat-divider></mat-divider>
        <div class="card-content-buttons">
          <button mat-button [routerLink]="'/property/' + p.p_id">
            View Property
          </button>

          <button mat-button disabled class="like-section" color="accent">
            <span class="likes-count">{{ p.likes || "0" }}</span>

            <mat-icon color="accent">thumb_up</mat-icon>
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </ng-container>
</div>
